# JavaScript-for-study2
Javascriptの学習用リポジトリです。
### jsファイルの外部参照について（別ファイルの関数を参照する方法）ES Modules
- HTMLのscriptファイルをモジュール化する。
```
<script type="module" src="./script.js"></script>
<script type="module" src="./reset.js"></script>
```
 - モジュール化することで外部からのファイルを参照することができるようになる。デフォルトだと、関数名の競合や元ファイルの変更が外部ファイルにも影響を与えることを防ぐため、参照できないようになっている。

- インポートとエクスポート
```
   // script.js
   export const myFunction = () => { ... };

   // reset.js
   import { myFunction } from './script.js';
```
 - 他のモジュールから関数や変数をインポートしたり、他のモジュールに対してエクスートしたりできます。
 - スコープ: モジュール内の変数は、デフォルトでモジュールスコープに限定され、グローバルスコープには影響を与えません。-> カプセル化
 -  非同期読み込み: モジュールは非同期に読み込まれ、他のスクリプトの実行をブロックしません。
 - モジュールはデフォルトエクスポートを持つことができ、インポート時に任意の名前を使用できます。

- Tips (外部参照をデフォルトで許可してしまった時の弊害)
 - 名前の衝突
 もしすべての変数や関数がデフォルトで外部からアクセスできると、異なるモジュールで同じ名前の変数や関数を定義した場合、衝突が起こる可能性があります。これにより、どの変数や関数が実際に使われているのかがわからなくなり、バグの原因になります。
 - カプセル化の欠如
 モジュールの主な目的の一つは、カプセル化です。カプセル化により、モジュール内の実装が外部に影響を与えず、逆に外部からの影響を受けないようにします。これにより、モジュールの内部実装を変更しても、外部のコードに影響を与えずに済みます。デフォルトで外部参照を許可すると、このカプセル化が失われ、モジュールの変更が他の部分に影響を及ぼす可能性があります。
 - 依存関係の管理
 モジュールが外部から自由にアクセスできると、依存関係が複雑になり、どのモジュールがどのモジュールに依存しているのかがわかりにくくなります。これにより、コードのメンテナンスが難しくなります。
 - セキュリティの問題
 外部からのアクセスを許可すると、意図しないコードがモジュールにアクセスできる可能性があります。これにより、セキュリティ上のリスクが増加します。

- カウンターアプリにおける10クリックするまでの経過時間を測り、称号と音声を流す。
 - カウント開始時間を保存する変数を追加
 - カウントが10になったとき、経過時間を計測し、結果と称号を表示
 - 称号に応じて音声を切り替える
 
 - 経過時間を保持する変数と経過時間の出し方と画面表示のさせ方
 ```
startTime = new Date(); // 初回クリック時にタイマー開始

const elapsedTime = (new Date() - startTime) / 1000; // 経過時間（秒）(例はif文で9回目のクリックの時間を測っている。)
displayMessage(`${elapsedTime.toFixed(1)}秒`); //経過時間を下１桁までとし、画面に表示
```
 - `startTime = new Date();`で初回クリックしたときの時間を生成し、格納する。`const elapsedTime = (new Date() - startTime) / 1000;`で目的の数に達した時間を生成`new Date()`、初回クリック時間を引き、`/1000`1000で割ることでミリ秒から秒に直す。そのままだと、桁数が多く、画面表示するには見た目が煩雑になるので、`elapsedTime.toFixed(1)秒`でしも１桁表示に直す。
  - `toFixed()メソッド`：Number型のインスタンスメソッド。`const num = 1.56`と宣言した時にjavascriptでは自動でNumber型に変換。※ JavaScriptでは数値は全てNumber型、intやfloatはないので混同しないように注意。`num.toFixed(1)`とすれば、小数１桁に指定し変数に格納された値を丸める。その後、文字列型で値を返す。つまり返り値を計算する場合はparseIntメソッドで数値に変換し直すことが必要になる。
  - ちなみに変数に格納した値のデータ型を確認したい場合は`console.log(typeof 変数名)`で確認することが可能である。
  - `${elapsedTime.toFixed(1)}秒`について
   - 変数を文字列に埋め込む方法として、テンプレートリテラルと文字列の結合がある。
    - テンプレートリテラル:文全体をバッククォート(``)と出力したい変数を${}で囲む。${}の中には変数や計算式、関数の呼び出しを直接記述する。可読性が高く、長い文字列や複数の変数を含む場合に便利。こちらの方が、モダンな記載方法で推奨される。